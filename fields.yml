## YAML Template.
---

add_user:
  desc: Add a new user into the system
  access: admin
  url: /user/create

admin:
  name: Administrator

agree_terms:
  question: I have read and accepted the terms and conditions.
  valid: equals(1)
  error: Must accept and agree to terms and conditions.


audit_trail:
  access: admin
  url: /user/audit_trail

blank:
  name: " "

calculate_days:
  type: calculate_period
  unit: day
  prev_unit: hour
  prev_unit_size: 24

calculate_hours:
  type: calculate_period
  unit: hour
  prev_unit: minute
  prev_unit_size: 60

calculate_period:
  sql: select ceiling(timestampdiff($prev_unit,'$start_time', '$end_time')/$prev_unit_size)

cellphone:
  desc: |
    The active cellphone or mobile number at which you can be contacted on.
    This number will be used to for OTP verification.
  valid: national_tel

change_password:
  desc: Change your current password
  access: reg
  action: dialog
  url: /user/start_reset_password

confirm_details:
  name: I confirm that the details provided are true and correct.
  valid: equals(1, Must confirm that details are true and correct)

contacts:
  email: support@mukoni.co.za

confirm_password:
  type: password
  desc: Type in the same password as above to confirm correctness
  valid: matches(password)

country:
  options:
    - sql: select code ,name  from country

day_of_month:
  options:
    - 1st
    - 2nd
    - 3rd
    - 4th
    - 5th
    - 6th
    - 7th
    - 8th
    - 9th
    - 10th
    - 11th
    - 12th
    - 13th
    - 14th
    - 15th
    - 16th
    - 17th
    - 18th
    - 19th
    - 20th
    - 21st
    - 22nd
    - 23rd
    - 24th
    - 25th
    - 26th
    - 27th
    - 28th
    - 29th
    - 30th
    - 31st

day_of_week:
  options:
    - sunday
    - monday
    - tuesday
    - wednesday
    - thursday
    - friday
    - saturday


developed_by:
  name: developed by Mukoni Software
  action: redirect
  url: http://www.mukoni.co.za
  target: _blank


email:
  desc: |
    The active email address at which you can be contacted on.
    This address will be used to for OTP verification and any system generated
    communication

  name: Email Address
  valid:
    - email

email_address:
  type: email

error_page:
  desc: Unexpected error occured. Please report to your System Administrator.

facebook:
  src: /fb.png
  url: http://facebook.com

first_name:
  desc: Your first name as written in your ID book
  valid: name

forgot_password:
  desc: Click here if you have forgotten your password and you need to reset it
  url: /password_changer/forgot

full_name:
  desc: Full name and surname
  question: What is your full name? Please specify first name and surname
  valid:
    - full_name
goto:
  action: $page.html

home:
  url: /home

id:
  name: Reference #

id_no:
  name: ID Number
  question: Please enter your South Africa Identity Number
  desc: Valid South African ID number
  valid:
    - za_id

id_number:
  type: id_no

last_name:
  desc: Your last name or surname as written in your ID book
  valid: name

latitude:
  desc: Distance north or south from the equator
  valid:
    - decimal

login:
  desc: Log in to the system
  access: public
  audit: $email
  url: /user/login
  src: /logout_icon.jpg

logout:
  desc: Log out of the system
  access: reg
  src: /logout_icon.jpg
  action: post
  post:
    - read_session: email
    - sql_exec: insert into audit_trail(user_id,action,detail) values($uid,'Logout','$email')
    - call: session_destroy()
    - redirect: /home


longitude:
  desc: Angular distance east or west on the earth's surface
  valid:
    - decimal

lineage_sql: >
  select concat_ws(',',c.$key_name,p1.$key_name,p2.$key_name,p3.$key_name,p4.$key_name,p5.$key_name) from $table c
  left join $table p1 on c.$parent_key = p1.$key_name
  left join $table p2 on p1.$parent_key = p2.$key_name
  left join $table p3 on p2.$parent_key = p3.$key_name
  left join $table p4 on p3.$parent_key = p4.$key_name
  left join $table p5 on p4.$parent_key = p5.$key_name
  where c.$key_name = '$key'

manage_user_group:
  access: user
  url: /user/groups

manage_users:
  access: user
  url: /user/list

mobile_number:
  desc: The mobile number at which you can be contacted on
  valid: national_tel

month:
  options:
    - january
    - february
    - march
    - april
    - may
    - june
    - july
    - august
    - september
    - october
    - november
    - december

mukoni_logo:
    desc: Visit our home page
    type: image
    src: mukoni.png
    url: http://www.mukoni.co.za

next:
  call: ""
  merge: true
  attr:
    class: action wizard-jump


password:
  desc: A secret combination of letters and number only known to you. Please do not give out your password.
  valid: password

query:
  type: button
  call: $class::$invoker($key)

redirect:
  type: link

register:
  desc: Click here to register
  access: public
  url: /user/register

send_email:
  support: Mukoni Support <support@mukoni.co.za>
  headers:
    - MIME-Version: "1.0"
    - Content-type: text/html; charset=iso-8859-1
  from: $from_user <$from_email>
  to: $to_user <$to_email>


start_date:
  name: Start Date
  desc: Date Effective From


submit_page:
  type: submit
  name: Submit
  call: $class::$page($key)


support_email: Mukoni Support <support@mukoni.co.za>


title:
  desc: A descriptive or distinctive appellation, especially one belonging to a person by right of rank, office, attainment
  options:
    - dr
    - miss
    - mr
    - mrs
    - ms
    - prof
    - rev
    - sir

twitter:
  src: /twitter.png
  url: https://twitter.com

validator:
  action: post
  validate: all

view_profile:
  desc: View my profile
  access: reg
  url: /user/profile
  action: dialog

view_users:
  access: admin
  desc: List all the users
  url: /user/list

weekday:
  options:
    - Sunday
    - Monday
    - Tuesday
    - Wednesday
    - Thursday
    - Friday
    - Saturday

wizard_post:
  type: button
  selector: "#page *"
  validate: all
  call: $class::$invoker($key)
  action: post
  attr: {wizard-jump: $code}
