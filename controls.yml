# html controls
---
ajax_result:
  html: >
    <span class=ajax_result style="display: none;"></span>

action_control:
  type: control
  class: [action]

blank:
  html: <span><span>

button:
  type: action_control
  html: <button>$name</button>


captioned_image:
  html: >
    <div id="$code" class=captioned-image>
      <img src="$src" title="$title"></img>
      <p>$caption</p>
    </div>
  title: $name
  src: $code.png
  caption: $name

checkbox:
  html: <input id="$code" title="$desc" type='checkbox'></input>

container:
  type: control
  html: <div>$contents</div>
  contents: []

control:
  attr:
    id: $code
    title: $desc
  class: []

control_template:
  desc: ""
  attr: {title: $desc }
  class: []

datatable:
  type: control
  html: <table><tbody></tbody></table>
  class: [data]
  create: datatable
  script: /common/datatable.js
  css: /datatable.css
  load:
    - call: datatable::read(context,$key)
  position: top
  filter: all
  filter:
    name: ""
    desc: Filter by specific columns
  #paging
  goto_first:
    name: First
    desc: Go to first page
  goto_prev:
    name: "<"
    desc: Go to previous page
  goto_next:
    name: ">"
    desc: Go to next page
  goto_last:
    name: Last
    desc: Go to last page

  # row actions
  row_actions:
    - type: query
  collapse:
    name: "-"
    desc: Hide details
  expand:
    name: +
    desc: More details ...
  slide:
    name: "<"
    desc: More options...
  slideoff:
    name: ">"
    desc: Hide options
  slideSpeed: 100

date:
  type: input
  create: datetimepicker
  timepicker: false
  format: Y-m-d
  script: /common/jquery.datetimepicker.js
  css: /common/jquery.datetimepicker.css

datetime:
  type: input
  create: datetimepicker
  format: Y-m-d H:i
  script: /common/jquery.datetimepicker.js
  css: /common/jquery.datetimepicker.css

date_time:
  type: date_time

disabled_text_input:
  type: input
  attr: disabled

disabled_input:
  type: input
  attr: disabled

dropdown:
  unselected: --Select $name--
  html: |
    <select>
      <option value=''>$unselected</option>
      $options
    </select>
  inherit: [$unselected]
  options:
    - type: dropdown_option

dropdown_option:
  type: control
  html: <option>$name</option>
  attr: { value: $code }

element:
  text: ""
  html: <$tag>$text</$tag>

#todo: fix backend inheritance
export:
  name: Export to Excel
  desc: Export to an Excel spreadsheet
  action: redirect
  validate: none
  call: datatable::export(context,$key)
  target: _blank

file:
  html: <div id="$code" name="$code"></div>
  create: file_uploader
  script: /common/file_uploader.js,/common/jquery.form.js
  css: /common/file_uploader.css
  uploader: /?action=upload
  max_size: 100

form:
  type: control
  html: <form></form>

#footer_actions:
#  - type: submit

google_map:
  type: control
  html: <div></div>
  create: mapper
  script: /common/map.js
  zoom: 5
  pin: blue_map_marker
  icon_path: /
  colors:
   - blue
   - green
   - yellow
   - orange
   - pink

h1:
  type: control
  html: <h1>$name</h1>
  name: $code

h2:
  type: control
  html: <h2>$name</h2>
  name: $code

h3:
  type: control
  html: <h3>$name</h3>

hidden:
  type: input
  attr: { type: hidden }

image:
  type: control
  html: <img></img>
  attr: {src: $src}

info_line:
  html: |
    <div class=info-line>
      <label>$name</label>
      <div class=info-text>$field</div>
    </div>

info_page:
    type: control
    html: |
      <div>
        <p class="desc">$desc</p>
        <span class=ajax_result style="display: none;"></span>
        <div class="form">
          $lines
          <p></p>$actions
        </div>
      </div>
    attr:
      page: $name
      title: $name
    lines:
      - type: info_text
      - template: info_line
    actions:
      - type: submit


info_text:
  type: control
  html: <div>$value</div>
  class: [info_text]

input:
  type: control
  html: <input></input>
  value: ""
  attr:
    type: text
    value: $value

inline_input:
  type: control_template
  html: <a>$field<span class="input">$desc</span></a>
  class: [input]
  attr:
    placeholder: "$name"

inline_input_page:
  type: control
  html: |
    <div>
      $input_page_header
      <div class="form">
        $inputs
        $actions
      </div>
    </div>
  inputs:
    - template: inline_input

input_page_header:
  type: control
  html: |
    <div>
      <p class="desc">$desc</p>
      <span class=ajax_result style="display: none;"></span>
    </div>
  attr: { page: $name}

label:
  type: control
  html: <label>$name</label>

labelled_input:
  type: control_template
  class: [labelled-input]
  html: |
    <div>
      <span class=label>$name$label_suffix</span>
      <a class=input>
        $field
        <span class=hint>$desc</span>
      </a>
    </div>
  label_suffix: ":"

labelled_input_page:
  type: page_control
  html: |
    <div>
      <p class="desc">$desc</p>
      <span class=ajax_result style="display: none;"></span>
      <div class="form">
        $inputs
        <p></p>$actions
      </div>
    </div>
  inputs:
    - type: input
    - template: labelled_input
    - mandatory: "*"
  actions:
    - type: submit

line:
  html: <hr></hr>

link:
  type: control
  html: <a>$name</a>

list_item:
  type: control
  html: <li>$name</li>

list_text:
  html: <li>$code</li>

menu:
  type: control
  html: <ul>$items</ul>
  items:
    - template: menu_item
    - type: link
    - action: redirect

menu_item:
  html: <li>$field</li>

one_cell_row:
  html: <tr><td>$field</td></tr>

one_column_table:
  type: control
  html: <table>$items</table>
  items:
    - template: one_cell_row

one_row_table:
  type: control
  html: <table><tr>$items</tr></table>
  items:
    - template: table_cell

p:
  type: paragraph
  html: <p>$name</p>

page:
  page: $code

page_control:
  type: control
  attr:
    page: $code
    title: $name

page_title:
  html: <title>$name</title>

paragraph:
  type: control
  html: <p>$name</p>

password_input:
  type: input
  attr: { type: password }

plain:
  html: $name

plain_text:
  type: plain

# todo: fix back-end to contextualise
print:
  desc: Print above contents
  action: redirect
  validate: none
  call: datatable::pdf(context, $key)
  target: _blank

question_input:
  type: control_template
  class: [question_input]
  attr: { name: $name}
  html: |
    <div>
      <div class=question>$question</div>
      <a class=input>
        $field
      </a>
    </div>

question_input_page:
  type: page_control
  html: |
    <div>
        <h2>$name</h2>
      <p class="desc">$desc</p>
      <span class=ajax_result style="display: none;"></span>
      <div class="form">
        $inputs
        $actions
      </div>
    </div>
  inputs:
    - type: input
    - template: question_input
    - mandatory: "*"
  actions:
    - type: submit

radiobox:
  type: input
  attr: { type: radio, value: $code}

radiobox_leftlabel:
  type: control_template
  class: [radio]
  html: <div><span>$name</span>$field</div>

radiobox_rightlabel:
  type: control_template
  class: [radio]
  html: <div>$field<span>$name</span></div>

radiobox_toplabel:
  type: control_template
  class: [radio]
  html: <div><p>$name</p>$field</div>

radiogroup:
  html: <div> $options</div>
  group: $code
  inherit: [group]
  options:
    - template: radiobox_leftlabel
    - type: radiobox
    - attr: { name: $group }

right_text:
  html: $field <p class=right-text>$name</p>

section_heading:
  html: <p class="section-heading">$name</p>

span:
  type: control
  html: <span>$name</span>

submit:
  type: button
  selector: "#page *"
  validate: all
  call: $class::$invoker($key)
  action: post

sub_menu:
  html: |
    <li>
      <a id="$code">$name</a>
      <span>$sub_items</span>
    </li>
  action: " "
  template: $field
  sub_items:
    - action: redirect
    - type: link

table:
  type: control
  html: <table><thead></thead><tbody>$rows</tbody></table>
  rows:
    - template: table_row

table_cell:
  html: <td>$field</td>

table_input:
  html: |
    <tr class=input>
      <td>$name</td>
      <td>
        <a class=input>
          $field
          <span>$desc</span>
        </a>
      </td>
    </tr>

table_input_page:
  type: page_control
  html: |
    <div>
      $input_page_header
      <table class=form>
        $inputs
        <tr>
          <td></td>
          <td>$actions</td>
        </tr>
      </table>
    </div>
  inputs: [template: table_input]

table_page:
  type: page_control
  html: <table>$children</table>
  children: [template: one_cell_row]

table_row:
  html: <tr>$columns</tr>
  columns: [template: table_cell]

text: { type: input }

textarea:
  type: control
  html: <textarea></textarea>

text_input: {type: input }


time:
  type: input
  create: datetimepicker
  datepicker: false
  format: H:i
  script: /common/jquery.datetimepicker.js
  css: /common/jquery.datetimepicker.css

titled_paragraph:
  html: >
    <div class=titled-paragraph>
      <p class=heading>$heading</p>
      <p class=text>$text</p>
    </div>
  heading: $name
  text: " "

wizard:
  create: wizard
  script: /common/wizard.js
  css: /common/wizard.css
  html: <div id=$code class=wizard></div>
  prev_name: Previous
  next_name: Next

wizard_jump:
  type: button
  action: trigger
  event:
    name: wizard-jump
    parameters: { index: $code }

wizard_next:
  type: button
  action: trigger
  event: wizard-next
...
