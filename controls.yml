# html controls
---
actioner:
  type: control
  class: [action]

blank:
  type: template
  tag: span
  text: ""

button:
  type: actioner
  tag: button
  attr: { title: $desc }

captioned_image:
  type: control
  class: [captioned-image]
  text: |
    <img src="$src" title="$title"></img>
    <p>$caption</p>
  title: $name
  src: $id.png
  caption: $name

checkbox:
  type: input
  type: checkbox

container:
  type: control
  tag: div
  text: $contents
  contents: []

control:
  html: <$tag>$text</$tag>
  tag: div
  attr: { id: $id }
  class: []
  text: $name

datatable:
  type: control
  tag: table
  text: <tbody></tbody>
  class: [data]
  create: datatable
  script: /common/datatable.js
  row_creator: { type: table_row }
  css: /datatable.css
  flags: []
    # - editall
    #
  load:
    - call: datatable::read(context,$key)
  position: top
  filter: all
  filter:
    name: ""
    desc: Filter by specific columns
  #paging
  goto_first:
    name: First
    desc: Go to first page
  goto_prev:
    name: "<"
    desc: Go to previous page
  goto_next:
    name: ">"
    desc: Go to next page
  goto_last:
    name: Last
    desc: Go to last page

  # row actions
  row_actions:
    - type: query
  collapse:
    name: "-"
    desc: Hide details
  expand:
    name: +
    desc: More details ...
  slide:
    name: "<"
    desc: More options...
  slideoff:
    name: ">"
    desc: Hide options
  slideSpeed: 100

date:
  type: input
  create: datetimepicker
  timepicker: false
  format: Y-m-d
  script: /common/jquery.datetimepicker.js
  css: /common/jquery.datetimepicker.css

datetime:
  type: input
  create: datetimepicker
  format: Y-m-d H:i
  script: /common/jquery.datetimepicker.js
  css: /common/jquery.datetimepicker.css

date_time:
  type: date_time

disabled_text_input:
  type: input
  attr: disabled

disabled_input:
  type: input
  attr: disabled

dropdown:
  unselected: --Select $name--
  html: |
    <select>
      <option value=''>$unselected</option>
      $options
    </select>
  inherit: [$unselected]
  options:
    - type: dropdown_option

dropdown_option:
  html: <option value='$id'>$name</option>

element:
  text: ""
  html: <$tag>$text</$tag>

#todo: fix backend inheritance
export:
  name: Export to Excel
  desc: Export to an Excel spreadsheet
  action: redirect
  validate: none
  call: datatable::export(context,$key)
  target: _blank

file:
  html: <div id="$id" name="$id"></div>
  create: file_uploader
  script: /common/file_uploader.js,/common/jquery.form.js
  css: /common/file_uploader.css
  uploader: /?action=upload
  max_size: 100

form:
  type: control
  html: <form></form>

#footer_actions:
#  - type: submit

google_map:
  type: control
  html: <div></div>
  create: mapper
  script: /common/map.js
  zoom: 5
  pin: blue_map_marker
  icon_path: /
  colors:
   - blue
   - green
   - yellow
   - orange
   - pink

h1:
  type: heading

h2:
  type: heading
  tag: h2

h3:
  type: heading
  tag: h3

heading:
  tag: h1
  type: control
  name: $id

hidden:
  type: input
  attr: { type: hidden }

image:
  type: control
  tag: img
  attr: {src: $src}
  src: $id.png
  text: ""

info_line:
  html: |
    <div class=info-line>
      <label>$name</label>
      <div class=info-text>$field</div>
    </div>

info_page:
    type: control
    html: |
      <div>
        <p class="desc">$desc</p>
        <span class=ajax_result style="display: none;"></span>
        <div class="form">
          $lines
          <p></p>$actions
        </div>
      </div>
    attr:
      page: $name
      title: $name
    lines:
      - type: info_text
      - template: info_line
    actions:
      - type: submit


info_text:
  type: control
  text: $value
  class: [info_text]

inline_input:
  type: template
  tag: a
  text: $field<span class="input">$desc</span>
  class: [input]
  attr:
    placeholder: "$name"

inline_input_page:
  type: control
  html: |
    <div>
      $input_page_header
      <div class="form">
        $inputs
        $actions
      </div>
    </div>
  inputs:
    - template: inline_input

input:
  type: control
  tag: input
  text: ""
  value: ""
  attr:
    type: text
    value: $value

input_page:
  type: page
  inherit: [desc]
  loading: { type: processing }
  synopsis: { type: section_heading, text: $desc}
  inputs:
    - type: input
  actions:
    - type: submit

label:
  type: control
  tag: label

labelled_input:
  type: template
  class: [labelled-input]
  text: |
      <span class=label>$name$label_suffix</span>
      <a class=input>
        $field
        <span class=hint>$desc</span>
      </a>
  label_suffix: ":"

labelled_input_page:
  type: input_page
  text: |
    $loading
    $synopsis
    <div class="form">
      $inputs
      <p></p>$actions
    </div>
  inputs:
    - template: labelled_input

line:
  tag: hr
  text: ""

link:
  type: control
  tag: a
  attr: { title: $desc }

list_item:
  type: control
  tag: li

list_text:
  type: control
  tag: li
  text: $id

menu:
  type: container
  tag: ul
  contents: $items
  items:
    - template: menu_item
    - type: link
    - action: redirect

menu_item:
  type: template
  tag: li

one_cell_row:
  type: template
  text: <td>$field</td>

one_column_table:
  type: container
  tag: table
  contents: $items
  items:
    - template: one_cell_row

one_row_table:
  type: control
  tag: table
  text: <tr>$items</tr>
  items:
    - template: table_cell

p:
  type: control
  tag: p
  name: $id

page:
  type: control
  attr: { title: $name }
  sub_page: true
  class: [page]

page_title:
  html: <title>$name</title>

paragraph:
  type: p

password_input:
  type: input
  attr: { type: password }

plain:
  type: control
  value: $name
  text: $value

plain_text:
  type: plain

# todo: fix back-end to contextualise
print:
  desc: Print above contents
  action: redirect
  validate: none
  call: datatable::pdf(context, $key)
  target: _blank

processing:
  type: template
  tag: span
  class: [ajax_result]
  style: { display: none }


question_input:
  type: template
  class: [question_input]
  attr: { name: $name}
  html: |
    <div>
      <div class=question>$question</div>
      <a class=input>
        $field
      </a>
    </div>

question_input_page:
  type: page
  html: |
    <div>
        <h2>$name</h2>
      <p class="desc">$desc</p>
      <span class=ajax_result style="display: none;"></span>
      <div class="form">
        $inputs
        $actions
      </div>
    </div>
  inputs:
    - type: input
    - template: question_input
    - mandatory: "*"
  actions:
    - type: submit

radiobox:
  type: input
  attr: { type: radio, value: $id}

radiobox_template:
  type: template
  class: [radio]

radiobox_leftlabel:
  type: radiobox_template
  text: <span>$name</span>$field

radiobox_rightlabel:
  type: radiobox_template
  text: $field<span>$name</span>

radiobox_toplabel:
  type: radiobox_template
  text: <p>$name</p>$field

radiogroup:
  type: control
  text: $options
  group: $id
  inherit: [group]
  options:
    - template: radiobox_leftlabel
    - type: radiobox
    - attr: { name: $group }

right_text:
  html: $field <p class=right-text>$name</p>

section_heading:
  type: control
  tag: p
  class: [section-heading]

span:
  type: control
  tag: span

submit:
  type: button
  selector: "#page *"
  validate: all
  call: $class::$invoker($key)
  action: post

sub_menu:
  type: template
  text: |
    <a id="$id">$name</a>
    <span>$sub_items</span>
  action: " "
  template: $field
  sub_items:
    - action: redirect
    - type: link

table:
  type: control
  tag: table
  head: $table_head
  body: $table_body
  text: $head$body
  rows:
    - template: table_row

table_head:
  type: template
  tag: thead

table_body:
  type: template
  tag: tbody

table_cell:
  type: template
  tag: td

table_input:
  type: template
  class: [input]
  tag: tr
  text: |
    <td style="width:25%;">$name</td>
    <td>
      <a class=input style="width:98%">
        $field
        <span>$desc</span>
      </a>
    </td>

table_input_page:
  type: input_page
  text: |
    $processing
    $synopsis
    $form
  inherit: [inputs,actions]
  form:
    type: table
    class: [form]
    text: $inputs $actions
  inputs:
    - template: table_input

table_page:
  type: page
  tag: table
  text: $children
  children: [template: one_cell_row]

table_row:
  type: control
  tag: tr
  text: $columns
  columns: [template: table_cell]

template:
  type: control
  text: $field
  attr: {id: ""}

text: { type: input }

textarea:
  type: control
  tag: textarea

text_input: {type: input }


time:
  type: input
  create: datetimepicker
  datepicker: false
  format: H:i
  script: /common/jquery.datetimepicker.js
  css: /common/jquery.datetimepicker.css

titled_paragraph:
  html: >
    <div class=titled-paragraph>
      <p class=heading>$heading</p>
      <p class=text>$text</p>
    </div>
  heading: $name
  text: " "

wizard:
  type: control
  create: wizard
  script: /common/wizard.js
  css: /common/wizard.css
  class: [wizard]
  prev_name: Previous
  next_name: Next

wizard_jump:
  type: button
  action: trigger
  event:
    name: wizard-jump
    parameters: { index: $id }

wizard_next:
  type: button
  action: trigger
  event: wizard-next
...
