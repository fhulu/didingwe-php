# html controls
---
accordion:
  tag: div
  text: $tabs
  create: accordion
  header: "> div > h3"
  autoHeight: false
  collapsible: true
  tabs:
    - template: accordion_tab

accordion_tab:
  templates: div
  text: <h3>$name</h3>$field

actioner:
  tag: button
  class: [borderless,medium-font,hover-shadow,vertical-middle,pad]
  attr: { action: $id, id: "", title: $desc }
  styles: [filled]

body:
  class: [didi]

alert_message:
  classes: div
  class: [center-text]
  style: [height_watermark]
  text: $message

blank:
  type: plain_text
  mutable: false
  text: ""
  class: [inline-block]

bookmark:
  tag: div
  title: $id
  link: $id
  text: $anchor
  attr: { id: ""}
  anchor:
    derive: [link,title]
    tag: a
    attr: { href: "#$link", id: ""}
    name: $title

button:
  type: actioner
  class: [action]
  tag: button
  attr: { title: $desc }
  action: redirect

button_image:
  class: [action]
  text: <input type="image" src="$src">
  attr: { title: $desc }
  src: $id.png

captcha_image:
  type: image
  src: /?action=action&path=/controls/captcha_image
  post: [show_captcha]


captioned_image:
  classes: div
  text: $image $caption
  source: $id.png
  title: $name
  image:
    derive: [source,title]
    type: image
    src: $source
    attr: { title: $title}
  caption:
    type: label
    derive: [title]
    text: $title
    styles: [block]

captioned_input:
  type: label_top
  styles: [widest,block,vspaced]
  space: 20
  label:
    derive: [caption]
    text: $caption
  text: $field $label

categorized:
  type: input_page
  tag: fieldset
  text: $legend $synopsis $inputs $controls
  title: $name
  legend:
    tag: legend
    derive: [title]
    text: $title

char_spaced:
  char_spacing: 8px
  letter-spacing: $char_spacing

checkbox:
  type: input
  values: ""
  immutable: [width]
  format: checkbox
  attr: { values: $values }
  class: [inline-block]


checkgroup:
  classes: div
  text: $options
  layout:
    type: label_right
    class: [inline-block]
  option:
    type: checkbox
    value: 0
    name: $2
    attr: { id: "", name: "", check: $id }
  options:
    - template: $layout
    - type: $option

class:
  tag: div
  attr: { id: ""}
  class: $id

container:
  tag: div
  text: $contents
  contents: []
  tooltip: false

control:
  html: <$tag>$text</$tag>
  tag: div
  attr: { id: $id }
  class: [didi]
  border-color: "#ccc"
  text: $name

date:
  type: datetime
  timepicker: false
  format: Y-m-d

date_future:
  type: date
  minDate: 0

datetime:
  type: input
  create: datetimepicker
  script: [/common/jquery.datetimepicker.js]
  css: [/common/jquery.datetimepicker.css]
  format: Y-m-d H:i
  validateOnBlur: false
  allowBlanks: false

datetime_future:
  type: datetime
  minDate: 0

date_time:
  type: date_time

disabled_input:
  type: input
  attr: { disabled: disabled }

disabled_text_input:
  type: disabled_input

document_link:
  tag: a
  attr: { title: $desc }
  text: $name
  style: { cursor: pointer }
  action: redirect
  target: _blank
  query: " "
  post:
    - view_doc: $value

dropdown:
  tag: select
  unselected: --Select $name--
  option:
    tag: option
    value: $1
    name: $2
    text: $name
    immutable: [name,value,text]
    attr: { value: $id }
  selected:
    classes: option
    derive: [unselected]
    text: $unselected
    attr: { value: ""}
  text: $options
  options:
    - $selected
    - type: $option

element:
  text: ""
  html: <$tag>$text</$tag>

email_input:
  type: input
  format: email

emailbox:
  type: email_input

empty:
  tag: div
  text: ""

#todo: fix backend inheritance
export:
  name: Export to Excel
  desc: Export to an Excel spreadsheet
  action: redirect
  validate: none
  post:
    call: datatable::export(context,$key)
  query: " "
  target: _blank

fieldset:
  templates: fieldset
  style: { display: table-column}
  text: $legend $field
  title: $name
  legend:
    tag: legend
    derive: [title]
    text: $title


file_input:
  type: input
  format: file

file_uploader:
  tag: div
  class: [file-uploader error-sink]
  create: file_uploader
  script: [/common/file_uploader.js,/common/jquery.form.js]
  css: [/common/file_uploader.css]
  uploader: /?action=action
  max_size: 100
  parent_id: $id
  allowed_extensions: pdf
  text: $form $iframe $progress $buttons
  form:
    tag: form
    width: 70%
    styles: [top_left]
    derive: [parent_id,uploader]
    attr:
      id: ""
      enctype: multipart/form-data
      target: iframe_$parent_id
    text: $file
    file:
      derive: [parent_id]
      type: file_input
      attr: { name: file_$parent_id }
  iframe:
    tag: iframe
    derive: [parent_id]
    hide: yes
    attr: {name: iframe_$parent_id }
  progress:
    type: container
    styles: [top_right,biggest]
    show: no
    contents:
      - default: { classes: div, styles: [biggest,top_let], text: "" }
      - bar
      - percent
  buttons:
    type: container
    styles: [top_right,tallest,center_text]
    width: 82
    contents:
      - default: { styles: [biggest,center_text], show: no }
      - type: button
      - upload
      - cancel
      - type: control
      - uploaded
      - failed
  post: [ upload ]
  audit:
    action: Upload
    detail: $document_type

filled:
  background-color: $fill
  color: $color

form:
  tag: form

flag_icon:
  tag: span
  class: [flag-icon flag-icon-$country]
  country: $id
  text: " "


google_icon:
  tag: i
  class: [material-icons]
  icon: $id
  text: $icon

google_map:
  tag: div
  create: mapper
  script: /common/map.js
  zoom: 5
  pin: blue_map_marker
  icon_path: /
  colors:
   - blue
   - green
   - yellow
   - orange
   - pink

h1:
  type: heading

h2:
  type: heading
  tag: h2

h3:
  type: heading
  tag: h3

half_width:
  type: template
  style:
    display: inline-block
    width: 48%
    margin-left: 1%

heading:
  tag: h1
  name: $id

height_watermark:
  type: watermark
  background-size: auto 100%

hidden:
  type: input
  format: hidden


hspace:
  mutable: false
  width: 0
  type: blank
  space: 6
  styles: [hspaced]

hspaced:
  space: 10px
  margin-right: $space

iframe:
  tag: iframe
  src: /$id
  attr: { src: $src }

image:
  tag: img
  attr: {src: $src}
  text: ""
  src_type: png
  src: /$id.$src_type

image_button:
  type: button
  text: $pic $name
  image: $id.png
  pic:
    type: input
    derive: [image]
    attr: { type: image, src: $image }



info_page:
  type: input_page
  inputs: $lines
  lines:
    - type: info_text
    - template: labelled_left

info_text:
  classes: label
  value: ""
  text: $value

inplace_input:
  type: label_inside

input:
  tag: input
  text: ""
  value: ""
  immutable: [format]
  class: [medium-font]
  format: text
  attr:
    type: $format
    value: $value
    name: $id

input_page:
  type: page
  text: $synopsis $inputs $controls
  input_left: 30%
  input_width: 67%
  layout:
    derive: [input_left,input_width]
    type: label_left
  synopsis:
    derive: [desc]
    space: 16
    type: section_heading
    text: $desc
  inputs:
    - template: $layout
    - type: input
  controls:
    tag: div
    class: [actions]
    derive: [input_left,actions]
    style: { margin-left: $input_left }
    text: $actions
  actions:
    - default: { styles: [hspaced], space: 24}
    - type: submit

label:
  tag: label
  text: $id

labelled:
  templates: div
  sow: [name]
  label:
    classes: label
    class: [inline-block,vertical-top]
  subject:
    attr: { title: $desc }

labelled_input:
  type: label_left

labelled_input_page:
  type: input_page

label_inside:
  label: $name
  subject:
    class: [border,widest]
    derive: [label]
    attr: { placeholder: $label, title: $desc}
  text: $field

labelled_inside:
  type: label_inside

labelled_inside_image:
  type: labelled_inside
  subject:
    styles: [height_watermark,centered_text]

label_left:
  type: labelled
  derive: [input_left,input_width]
  label:
    derive: [input_left]
    suffix: ":"
    text: $name$suffix&nbsp;
    width: $input_left
    class: [right-text]
  subject:
    derive: [input_width,input_left]
    width: $input_width
    class: [border,pad]
  text: $label$field
  styles: [vspaced]

label_mobile:
  type: labelled
  styles: [widest]
  style:
    margin-right: $side_spacing
    margin-bottom: $line_spacing
  label:
    suffix: ""
    text: $name$suffix
  subject:
    styles: [block]
  text: $label$field

label_right:
  type: labelled
  label:
    text: $name
    class: [left-text]
  subject:
    attr: { title: $desc }
  text: $field $label

label_top:
  type: labelled
  styles: [inline_block]
  label:
    styles: [block]
    text: $name
  subject:
    styles: [block]
  text: $label$field

left_text:
  text-align: left

letter_spaced:
  type: char_spaced

line:
  mutable: false
  tag: hr
  text: ""


link:
  class: [pointer-cursor]
  tag: a
  attr: { title: $desc }
  text: $name
  immutable: [url]
  url: /$id
  action: redirect

link_underlined:
  type: link
  style: { text-decoration: underline }

list_item:
  tag: li

list_text:
  type: plain_text
  tag: li
  style: { margin-left: 16 }

multi_input:
  classes: div
  class: [error-sink,inline-block]
  attr: { id: ""}
  text: $inputs
  split: 49%
  spacing: 0.9%
  inputs:
    - template: label_inside
    - type: input
    - default:
        derive: [split,spacing]
        width: $split
        class: [border,inline-block]
        styles: [hspaced]
        space: $spacing

navigate:
  - type: submit

number_input:
  type: input
  format: number

numbered_document:
  type: multi_input
  inputs:
    - types: [number_input,link]

one_cell_row:
  templates: div
  text: <td>$field</td>

one_column_table:
  type: container
  tag: table
  contents: $items
  items:
    - template: one_cell_row

one_row_table: { type: silos }

p: { tag: p}

page:
  classes: div
  attr: { title: $name }
  sub_page: true
  text: $items
  items: []
  tooltip: false
  header_class: [pad-y,center-text, large-font]
  class: [pad-bottom]

page_title:
  html: <title>$name</title>

paragraph:
  type: p

password:
  type: input
  attr: { type: password }

password_input:
  type: password

plain:
  tag: div
  value: $name
  text: $value

plain_text:
  tag: div
  text: $id
  attr: { id: ""}

plot:
  tag: div
  fixed_xaxis: yes
  script:
    - /common/jquery.jqplot.min.js
    - /common/jquery.jqplot.canvasTextRenderer.min.js
    - /common/jquery.jqplot.canvasAxisTickRenderer.min.js
    - /common/jquery.jqplot.dateAxisRenderer.min.js
    - /common/jquery.jqplot.highlighter.min.js
    - /common/plot.js
  css: [/common/jquery.jqplot.min.css]
  text: ""
  create: plotter


# todo: fix back-end to contextualise
print:
  desc: Print above contents
  action: redirect
  validate: none
  post:
    - call: datatable::pdf(context,$key)
  query: " "
  target: _blank

processing:
  classes: span
  style: { display: none }

question_input:
  type: label_top
  styles: [widest,block]
  label:
    styles: [widest,left_text]
    derive: [question]
    text: $question
  subject:
    styles: [widest]

question_input_page:
  type: input_page
  inputs:
    - template: question_input

radiobox:
  type: input
  value: $id
  immutable: [value]
  attr: { type: radio, value: $value, id: ""}
  style:
    width: 24px
    height: 24px


radiogroup:
  templates: div
  class: radio
  text: $options
  group: $id
  layout:
    type: label_left
  options:
    - template: $layout
    - type:
        type: radiobox
        derive: [group]
        attr: { name: $group }


row_input:
  html: <tr><td>$name</td><td>$field</td></tr>

row_inputs:
  tag: table
  class: [data]
  text: $head $inputs
  heading: $name
  sow: [heading,inputs]
  head:
    html: <thead><th colspan=2>$heading</th></thead>
  inputs:
    - template: row_inputr
    - type: input


section_heading:
  classes: p
  class: [center-text,thinner,widest,vspaced,border-bottom]

side_spacer:
  space: 2px
  subject:
    style:
      display: inline-block
      margin-bottom: $space

silos:
  tag: table
  text: $row
  cell_width: 33%
  sow: [cell_width]
  row:
    templates: tr
    derive: [items]
    sow: [cell_width]
    field: $items
  items:
    - template: table_cell

span:
  tag: span

source:
  tag: div
  file: $id.html
  jquery: load
  params: [$file]


story:
  type: control
  text: $heading $body
  title: $name
  sow: [title]
  heading:
    type: plain_text
    tag: h1
    class: [heading]
    text: $title
  body:
    - type: plain_text


submit:
  type: button
  selector: "#page *"
  call: $class::$invoker($key)
  action: post

table:
  tag: table
  head: { type: table_head }
  body: { type: table_body }
  text: $head $body
  sow: [rows]
  rows:
    - type: table_row

table_head: { templates: thead }

table_body:
  templates: tbody
  field: $rows

table_cell:
  templates: td
  cell_width: 20%
  style:
    width: $cell_width
    vertical-align: top

table_input:
  templates: tr
  class: [input]
  text: |
    <td style="width:25%;">$name</td>
    <td>
      <a class=input style="width:98%">
        $field
        <span>$desc</span>
      </a>
    </td>

table_input_page:
  type: input_page
  text: |
    $processing
    $synopsis
    $form
  sow: [inputs,actions]
  form:
    type: table
    class: [form]
    text: $inputs $actions
  inputs:
    - template: table_input

table_page:
  type: page
  tag: table
  text: $children
  children: [template: one_cell_row]

table_row:
  tag: tr
  text: $columns
  columns:
    - template: table_cell

tabular:
  type: container
  sow: [col_width]
  contents:
    - default:
        style: { width: $col_width, display: inline-block, vertical-align: top }

template:
  tag: div
  text: $field
  attr: { id: ""}

textarea:
  tag: textarea
  value: ""
  text: $value

text_area: { type: textarea}

text_input: {type: input }

time:
  type: input
  create: datetimepicker
  datepicker: false
  format: H:i

titled_paragraph:
  classes: div
  text: $heading $content
  title: $id
  body: $name
  heading:
    derive: [title]
    type: plain_text
    tag: h2
    styles: [vspaced]
    text: $title
  content:
    derive: [body]
    type: plain_text
    tag: p
    text: $body
  space: 30
  styles: [vspaced]


tri_input:
  type: multi_input
  split: 32.5%
  spacing: 0.5%


twin_input:
  type: multi_input
  split: half

vspace:
  mutable: false
  type: blank
  space: 20
  template: none
  styles: [vspaced]
  class: [block]

vspaced:
  space: 6px
  margin-top: $space

watermark:
  image: $id.png
  background-image: url($image)
  repeat: no-repeat
  imagex: left
  imagey: center
  background-repeat: $repeat
  background-position: $imagex $imagey
  background-color: $fill


...
