# html controls
---
accordion:
  tag: div
  text: $tabs
  create: accordion
  header: "> div > h3"
  autoHeight: false
  collapsible: true
  tabs:
    - template: accordion_tab

accordion_tab:
  templates: div
  text: <h3>$name</h3>$field

actioner:
  tag: div
  attr: { action: $id, id: "" }

alert_message:
  classes: div
  styles: [height_watermark,centered_text]
  text: $message

blank:
  mutable: false
  templates: div
  text: ""
  styles: [inline_block]

block:
  display: block
  line_spacing: 0px
  margin-top: $line_spacing

bold:
  font-weight: bold

bolder:
  font-weight: bolder

button:
  class: [action]
  tag: button
  attr: { title: $desc }

button_image:
  class: [action]
  text: <input type="image" src="$src">
  attr: { title: $desc }
  src: $id.png

captioned_image:
  classes: div
  text: |
    <img src="$src" title="$title"></img>
    <p>$caption</p>
  title: $name
  src: $id.png
  caption: $name


centered:
  margin-left: auto
  margin-right: auto

centered_text:
  text-align: center

char_spaced:
  char_spacing: 8px
  letter-spacing: $char_spacing

checkbox:
  type: input
  values: ""
  attr: { type: checkbox, values: $values }

checkbox_group:
  classes: div
  text: $options
  options:
    - type: checkbox
    - template: label_left

checkgroup:
  templates: div
  class: radio
  text: $options
  group: $id
  inherit: [group]
  options:
    - template:
        type: labelled_left
        suffix: " "
        label_width: auto
        input_width: auto
        styles: [inline_block]
    - type: checkbox
    - attr: { name: $group }

class:
  tag: div
  attr: { id: ""}
  class: $id

container:
  tag: div
  text: $contents
  contents: []
  tooltip: false

control:
  html: <$tag>$text</$tag>
  tag: div
  attr: { id: $id }
  class: []
  text: $name

darker:
  color: "#333"

datatable:
  head: ""
  tooltip: false
  type: table
  class: [data]
  create: datatable
  script: /common/datatable.js
  row_creator: { type: table_row }
  css: /common/datatable.css
  flags: []
    # - editall
    #
  inherit: [data]
  post:
    - read_values: { rows: $data}
    - call: datatable::read(context,$key)

  position: top
  filter:
    name: ""
    desc: Filter by specific columns

  fields: [ type: none ]
  inherit: [slide,slideoff]

  #paging
  paging:
    - statics
    - type: actioner
    - wrap: class

  goto_first:
    name: First
    desc: Go to first page
  goto_prev:
    name: "<"
    desc: Go to previous page
  goto_next:
    name: ">"
    desc: Go to next page
  goto_last:
    name: Last
    desc: Go to last page

  # row actions
  row_actions:
    - type: actioner
    - action: trigger
    - slide
    - slideoff
    - action: post

  footer_actions:
    - type: actioner


  collapse:
    name: "-"
    desc: Hide details
  expand:
    name: +
    desc: More details ...
    pages: []

  slide:
    event: slide
    name: "<"
    desc: More options...

  slideoff:
    event: slideoff
    name: ">"
    desc: Hide options

  slideSpeed: 100

date:
  type: datetime
  create: datetimepicker
  timepicker: false
  format: Y-m-d

date_future:
  type: date
  minDate: 0

datetime:
  type: input
  create: datetimepicker
  format: Y-m-d H:i
  validateOnBlur: false
  non_inherit: [next,prev]
  allowBlanks: false

datetime_future:
  type: datetime
  minDate: 0

date_time:
  type: date_time

disabled_input:
  type: input
  attr: { disabled: disabled }

disabled_text_input:
  type: disabled_input

double_spaced:
  margin-top: 10px

dropdown:
  tag: select
  inherit: [unselected,default,option]
  unselected: --Select $name--
  option:
    tag: option
    value: $1
    name: $2
    text: $name
    attr: { value: $id }
  default:
    classes: option
    text: $unselected
    attr: { value: ""}
  text: $options
  options:
    - default
    - type: option

element:
  text: ""
  html: <$tag>$text</$tag>

email:
  type: input
  attr: { type: email }

#todo: fix backend inheritance
export:
  name: Export to Excel
  desc: Export to an Excel spreadsheet
  action: redirect
  validate: none
  post:
    call: datatable::export(context,$key)
  query: " "
  target: _blank

file:
  html: <div id="$id" name="$id"></div>
  create: file_uploader
  script: /common/file_uploader.js,/common/jquery.form.js
  css: /common/file_uploader.css
  uploader: /?action=upload
  max_size: 100

form:
  tag: form

#footer_actions:
#  - type: submit


google_map:
  tag: div
  create: mapper
  script: /common/map.js
  zoom: 5
  pin: blue_map_marker
  icon_path: /
  colors:
   - blue
   - green
   - yellow
   - orange
   - pink

h1:
  type: heading

h2:
  type: heading
  tag: h2

h3:
  type: heading
  tag: h3

half_width:
  type: template
  style:
    display: inline-block
    width: 48%
    margin-left: 1%

heading:
  tag: h1
  name: $id

height_watermark:
  type: watermark
  background-size: auto 100%

hidden:
  type: input
  attr: { type: hidden }

hspaced:
  hspace: 10px
  margin-left: $hspace


image:
  tag: img
  attr: {src: $src}
  text: ""
  src_type: png
  src: $id.png

info_page:
  type: input_page
  inputs: $lines
  lines:
    - type: info_text
    - template: labelled_left

info_text:
  classes: div
  value: ""
  text: $value

inline:
  display: inline

inline_block:
  display: inline-block

inplace_input:
  type: labelled_inside

input:
  tag: input
  text: ""
  value: ""
  attr:
    type: text
    value: $value

input_page:
  inherit: [desc]
  type: page
  text: $synopsis $inputs $actions
  synopsis:
    type: section_heading
    text: $desc
  inputs:
    - template: label_left
    - type: input
  actions:
    - wrap: class
    - type: submit

isearch:
  type: input
  create: isearch
  script: [/common/isearch.js]
  css: [/common/isearch.css]
  max_size: 0
  post:
    - call: isearch::q(context)

italic:
  font-style: italic

label:
  tag: label
  styles: [inline_block]

labelled:
  templates: div
  inherit: [name]
  label: { classes: label }
  subject:
    class: [input]
    attr: { title: $desc }

labelled_input:
  type: labelled_left

labelled_input_page:
  type: input_page

labelled_inside:
  inherit: [name]
  subject:
    class: [input]
    width: 100%
    attr: { placeholder: $name, title: $desc }
  text: $field

labelled_inside_image:
  type: labelled_inside
  subject:
    styles: [height_watermark,centered_text]

label_left:
  type: labelled
  label:
    suffix: ":"
    text: $name$suffix
    width: 30%
    styles: [right_text,inline_block]
  subject:
    width: 67%
    styles: [inline_block]
  text: $label $field
  styles: [vspaced]

label_mobile:
  type: labelled
  styles: [widest]
  suffix: ""
  inherit: [suffix]
  style:
    margin-right: $side_spacing
    margin-bottom: $line_spacing
  label:
    styles: [block]
    text: $name$suffix
  subject:
    styles: [block]
  text: $label$field

label_right:
  type: labelled
  label:
    text: $name
  subject:
    class: [input]
    attr: { title: $desc }
  text: $field$label

label_top:
  type: labelled
  styles: [inline_block]
  label:
    styles: [block]
    text: $name
  subject:
    styles: [block]
  text: $label$field

left_text:
  text-align: left

letter_spaced:
  type: char_spaced

lighter:
  font-weight: lighter

line:
  tag: hr
  text: ""


link:
  tag: a
  attr: { title: $desc }
  text: $name
  style: { cursor: pointer }

link_underlined:
  type: link
  style: { text-decoration: underline }

list_item:
  tag: li

list_text:
  tag: li
  text: $id

lowercase:
  text-transform: lowercase

medium:
  font-size: 26pt

menu:
  type: container
  tag: ul
  contents: $items
  items:
    - template: menu_item
    - type: link
    - action: redirect

menu_item: { templates: li }

one_cell_row:
  templates: div
  text: <td>$field</td>

one_column_table:
  type: container
  tag: table
  contents: $items
  items:
    - template: one_cell_row

one_row_table:
  tag: table
  text: $row
  cell_width: 33%
  inherit: [items,cell_width]
  row:
    templates: tr
    inherit: [cell_width]
    field: $items
  items:
    - template: table_cell

p: { tag: p}

page:
  classes: div
  attr: { title: $name }
  sub_page: true
  text: $items
  items: []
  tooltip: false

page_title:
  html: <title>$name</title>

paragraph:
  type: p

password:
  type: input
  attr: { type: password }

password_input:
  type: password

plain:
  tag: div
  value: $name
  text: $value

plain_text:
  type: plain

plot:
  tag: div
  fixed_xaxis: yes
  script:
    - /common/jquery.jqplot.min.js
    - /common/jquery.jqplot.canvasTextRenderer.min.js
    - /common/jquery.jqplot.canvasAxisTickRenderer.min.js
    - /common/jquery.jqplot.dateAxisRenderer.min.js
    - /common/jquery.jqplot.highlighter.min.js
    - /common/plot.js
  css: [/common/jquery.jqplot.min.css]
  text: ""
  create: plotter


# todo: fix back-end to contextualise
print:
  desc: Print above contents
  action: redirect
  validate: none
  post:
    - call: datatable::pdf(context,$key)
  query: " "
  target: _blank

processing:
  classes: span
  style: { display: none }


pushed_left:
  float: left

pushed_right:
  float: right

pushed_up:
  vertical-align: top

question_input:
  type: label_top
  inherit: [question]
  styles: [widest,block]
  label:
    styles: [widest]
    text: $question
  subject:
    styles: [widest]

question_input_page:
  type: input_page
  inputs:
    - template: question_input

radiobox:
  type: input
  attr: { type: radio, value: $id}
  style:
    width: 24px
    height: 24px

right_text:
  text-align: right


radiogroup:
  templates: div
  class: radio
  text: $options
  group: $id
  inherit: [group]
  options:
    - template: label_left
    - type: radiobox
    - attr: { name: $group }


row_input:
  html: <tr><td>$name</td><td>$field</td></tr>

row_inputs:
  tag: table
  class: [data]
  text: $head $inputs
  heading: $name
  inherit: [heading,inputs]
  head:
    html: <thead><th colspan=2>$heading</th></thead>
  inputs:
    - template: row_inputr
    - type: input

section_heading:
  classes: p
  styles: [centered_text,thinner,widest,vspaced,underlined]

side_spacer:
  space: 2px
  subject:
    style:
      display: inline-block
      margin-bottom: $space

small:
  font-size: 8pt

span:
  tag: span

submit:
  type: button
  selector: "#page *"
  call: $class::$invoker($key)
  action: post

sub_menu:
  templates: div
  text: |
    <a id="$id">$name</a>
    <span>$sub_items</span>
  action: " "
  template: $field
  sub_items:
    - action: redirect
    - type: link

table:
  tag: table
  head: { type: table_head }
  body: { type: table_body }
  text: $head $body
  inherit: [rows]
  rows:
    - type: table_row

table_head: { templates: thead }

table_body:
  templates: tbody
  field: $rows

table_cell:
  templates: td
  cell_width: 20%
  style:
    width: $cell_width
    vertical-align: top

table_input:
  templates: tr
  class: [input]
  text: |
    <td style="width:25%;">$name</td>
    <td>
      <a class=input style="width:98%">
        $field
        <span>$desc</span>
      </a>
    </td>

table_input_page:
  type: input_page
  text: |
    $processing
    $synopsis
    $form
  inherit: [inputs,actions]
  form:
    type: table
    class: [form]
    text: $inputs $actions
  inputs:
    - template: table_input

table_page:
  type: page
  tag: table
  text: $children
  children: [template: one_cell_row]

table_row:
  tag: tr
  text: $columns
  columns:
    - template: table_cell

template:
  tag: div
  text: $field
  attr: {for: $id, id: ""}

textarea:
  tag: textarea
  value: ""
  text: $value

text_area: { type: textarea}

text_input: {type: input }

thinner:
  font-weight: 100

time:
  type: input
  create: datetimepicker
  datepicker: false
  format: H:i

titled_paragraph:
  html: >
    <div class=titled-paragraph>
      <p class=heading>$heading</p>
      <p class=text>$text</p>
    </div>
  heading: $name
  text: " "

tripple_spaced:
  margin-top: 12px

underlined:
  line_width: 1px
  border-bottom: $line_width solid

underlined_text:
  text-decoration: underline

uppercase:
  text-transform: uppercase

vspaced:
  space: 6px
  margin-top: $space


watermark:
  image: $id.png
  background-image: url($image)
  background-repeat: no-repeat

widest:
  width: 100%


wizard:
  classes: div
  create: wizard
  script: [/common/wizard.js]
  css: [/common/wizard.css]
  text: $bookmarks
  bookmarks: []
  steps: []


wizard_jump:
  classes: button
  action: trigger
  event:
    name: wizard-jump
    parameters: { index: $id }

wizard_page:
  type: input_page
  text: $processing $synopsis $inputs $actions $navigate
  sub_page: false
  prev:
    type: button
    name: Previous
    action: trigger
    event: wizard-prev
  inherit: [next,prev]
  navigate:
    - wrap: class
    - prev
    - type: submit
    - next

wizard_prev:
  type: wizard_action
  event: wizard-prev
  name: Previous

...
