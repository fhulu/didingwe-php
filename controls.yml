# html controls
---
accordion:
  tag: div
  text: $tabs
  create: accordion
  header: "> div > h3"
  autoHeight: false
  collapsible: true
  tabs:
    - template: accordion_tab

accordion_tab:
  templates: div
  text: <h3>$name</h3>$field

actioner:
  tag: div
  attr: { action: $id, id: "", title: $desc }
  styles: [filled]


alert_message:
  classes: div
  styles: [height_watermark,centered_text]
  text: $message

blank:
  type: plain_text
  mutable: false
  text: ""
  styles: [inline_block]

block:
  display: block

bold:
  font-weight: bold

bolder:
  font-weight: bolder

bookmark:
  tag: div
  title: $id
  link: $id
  text: $anchor
  attr: { id: ""}
  anchor:
    derive: [link,title]
    tag: a
    attr: { href: "#$link", id: ""}
    name: $title

bottom_left:
  position: absolute
  left: 0
  right: 0

bottom_right:
  position: absolute
  bottom: 0
  right: 0

button:
  class: [action]
  tag: button
  attr: { title: $desc }
  action: redirect

button_image:
  class: [action]
  text: <input type="image" src="$src">
  attr: { title: $desc }
  src: $id.png

captcha_image:
  type: image
  src: /?action=action&path=/controls/captcha_image
  post: [show_captcha]

captioned_image:
  classes: div
  text: $image $caption
  parent_id: $id
  image:
    derive: [parent_id]
    type: image
    src: /$parent_id.png
    attr: { title: $name}
  caption:
    type: label
    derive: [title]
    text: $title
    styles: [block]
  title: $name
  src: $id.png

captioned_input:
  type: label_top
  styles: [widest,block,vspaced]
  space: 20
  label:
    derive: [caption]
    text: $caption
  text: $field $label

categorized:
  type: input_page
  tag: fieldset
  text: $legend $synopsis $inputs
  title: $name
  legend:
    tag: legend
    derive: [title]
    text: $title


center_all:
  text-align: center
  margin-left: auto
  margin-right: auto

centered:
  margin-left: auto
  margin-right: auto

centered_text:
  text-align: center

char_spaced:
  char_spacing: 8px
  letter-spacing: $char_spacing

checkbox:
  type: input
  values: ""
  immutable: [width]
  attr: { type: checkbox, values: $values }

checkbox_group:
  classes: div
  text: $options
  options:
    - type: checkbox
    - template: label_left

checkgroup:
  templates: div
  class: radio
  text: $options
  layout:
    type: label_left
    label: { suffix: " " }
  options:
    - template: $layout
    - type: checkbox

class:
  tag: div
  attr: { id: ""}
  class: $id

container:
  tag: div
  text: $contents
  contents: []
  tooltip: false

control:
  html: <$tag>$text</$tag>
  tag: div
  attr: { id: $id }
  class: []
  text: $name

darker:
  color: "#333"

datatable:
  head: ""
  tooltip: false
  type: table
  class: [data]
  create: datatable
  script: /common/datatable.js
  row_creator: { type: table_row }
  css: [/common/datatable.css,/datatable.css]
  flags: []
    # - editall
    #
  sow: [data]
  post:
    - read_values: { rows: $data}
    - call: datatable::read(context,$key)

  position: top
  filter:
    name: ""
    desc: Filter by specific columns

  fields:
    - type: none
    - default: { span: 1}

  sow: [slide,slideoff]

  #paging
  paging:
    - statics
    - type: actioner
    - wrap: class

  goto_first:
    name: First
    desc: Go to first page
  goto_prev:
    name: "<"
    desc: Go to previous page
  goto_next:
    name: ">"
    desc: Go to next page
  goto_last:
    name: Last
    desc: Go to last page

  # row actions
  row_actions:
    - default: { validate: none }
    - type: actioner
    - action: trigger
    - slide
    - slideoff
    - action: post

  footer_actions:
    - type: actioner


  collapse:
    name: "-"
    desc: Hide details
  expand:
    name: +
    desc: More details ...
    pages: []

  slide:
    event: slide
    name: "<"
    desc: More options...

  slideoff:
    event: slideoff
    name: ">"
    desc: Hide options

  slideSpeed: 100

date:
  type: datetime
  create: datetimepicker
  timepicker: false
  format: Y-m-d

date_future:
  type: date
  minDate: 0

datetime:
  type: input
  create: datetimepicker
  format: Y-m-d H:i
  validateOnBlur: false
  allowBlanks: false

datetime_future:
  type: datetime
  minDate: 0

date_time:
  type: date_time

disabled_input:
  type: input
  attr: { disabled: disabled }

disabled_text_input:
  type: disabled_input

double_spaced:
  margin-top: 10px

dropdown:
  tag: select
  unselected: --Select $name--
  option:
    tag: option
    value: $1
    name: $2
    text: $name
    attr: { value: $id }
  default:
    classes: option
    derive: [unselected]
    text: $unselected
    attr: { value: ""}
  text: $options
  options:
    - $default
    - type: $option

element:
  text: ""
  html: <$tag>$text</$tag>

email_input:
  type: input
  format: email

emailbox:
  type: email_input

#todo: fix backend inheritance
export:
  name: Export to Excel
  desc: Export to an Excel spreadsheet
  action: redirect
  validate: none
  post:
    call: datatable::export(context,$key)
  query: " "
  target: _blank

fieldset:
  templates: fieldset
  style: { display: table-column}
  text: $legend $field
  title: $name
  legend:
    tag: legend
    derive: [title]
    text: $title


file_input:
  type: input
  format: file

file_uploader:
  tag: div
  class: [file-uploader]
  create: file_uploader
  script: [/common/file_uploader.js,/common/jquery.form.js]
  css: [/common/file_uploader.css]
  uploader: /?action=upload
  max_size: 100
  parent_id: $id
  allowed: pdf
  text: $form $iframe $progress $buttons
  form:
    tag: form
    width: 70%
    styles: [top_left]
    derive: [parent_id,uploader]
    attr:
      id: ""
      enctype: multipart/form-data
      target: iframe_$parent_id
    text: $file
    file:
      derive: [parent_id]
      type: file_input
      attr: { name: file_$parent_id }
  iframe:
    tag: iframe
    derive: [parent_id]
    hide: yes
    attr: {name: iframe_$parent_id }
  progress:
    type: container
    styles: [top_right,biggest]
    show: no
    contents:
      - default: { classes: div, styles: [biggest,top_let], text: "" }
      - bar
      - percent
  buttons:
    type: container
    styles: [top_right,tallest]
    width: 15%
    contents:
      - default: { styles: [biggest], show: no }
      - type: button
      - upload
      - cancel
      - type: control
      - uploaded
      - failed
  post: []
  audit: "$type: $file_name"

filled:
  background-color: $fill
  color: $color

form:
  tag: form

float_left:
  float: left

float_right:
  float: right

google_map:
  tag: div
  create: mapper
  script: /common/map.js
  zoom: 5
  pin: blue_map_marker
  icon_path: /
  colors:
   - blue
   - green
   - yellow
   - orange
   - pink

h1:
  type: heading

h2:
  type: heading
  tag: h2

h3:
  type: heading
  tag: h3

half_width:
  type: template
  style:
    display: inline-block
    width: 48%
    margin-left: 1%

heading:
  tag: h1
  name: $id

height_watermark:
  type: watermark
  background-size: auto 100%

hide:
  display: none

hidden:
  type: input
  format: hidden

highest:
  height: 100%

hspace:
  mutable: false
  type: blank
  space: 20
  styles: [hspaced]

hspaced:
  hspace: 10px
  margin-right: $space

iframe:
  tag: iframe
  src: /$id
  attr:
    src: $src

image:
  tag: img
  attr: {src: $src}
  text: ""
  src_type: png
  src: /$id.$src_type

image_button:
  type: button
  text: $pic $name
  image: $id.png
  pic:
    type: input
    derive: [image]
    attr: { type: image, src: $image }



info_page:
  type: input_page
  inputs: $lines
  lines:
    - type: info_text
    - template: labelled_left

info_text:
  classes: div
  value: ""
  text: $value

inline:
  display: inline

inline_block:
  display: inline-block

inplace_input:
  type: labelled_inside

input:
  tag: input
  text: ""
  value: ""
  format: text
  attr:
    type: $format
    value: $value
    name: $id

input_page:
  type: page
  text: $synopsis $inputs
  layout: { type: label_left }
  synopsis:
    derive: [desc]
    space: 16
    type: section_heading
    text: $desc
  inputs:
    - template: $layout
    - type: input
    - controls:
        class: ""
        push: last
        template:
          label: { text: " " }
        styles: [inline_block]
        type: container
        derive: [actions]
        contents: $actions
  actions:
    - default: { styles: [hspaced], space: 24}
    - type: submit

isearch:
  type: input
  create: isearch
  script: [/common/isearch.js]
  css: [/common/isearch.css]
  max_size: 0
  post:
    - call: isearch::q(context)

italic:
  font-style: italic

label:
  tag: label
  styles: [inline_block]

labelled:
  templates: div
  sow: [name]
  label: { classes: label }
  subject:
    class: [input]
    attr: { title: $desc }

labelled_input:
  type: label_left

labelled_input_page:
  type: input_page

label_inside:
  label: $name
  subject:
    class: [input]
    width: 100%
    attr: { placeholder: $label, title: $desc, for: $id }
  text: $field

labelled_inside:
  type: label_inside

labelled_inside_image:
  type: labelled_inside
  subject:
    styles: [height_watermark,centered_text]

label_left:
  type: labelled
  label:
    suffix: ":"
    text: $name$suffix
    width: 30%
    styles: [right_text,inline_block]
  subject:
    width: 67%
    styles: [inline_block]
  text: $label $field
  styles: [vspaced]

label_mobile:
  type: labelled
  styles: [widest]
  style:
    margin-right: $side_spacing
    margin-bottom: $line_spacing
  label:
    suffix: ""
    text: $name$suffix
  subject:
    styles: [block]
  text: $label$field

label_right:
  type: labelled
  label:
    text: $name
  subject:
    class: [input]
    attr: { title: $desc }
  text: $field$label

label_top:
  type: labelled
  styles: [inline_block]
  label:
    styles: [block]
    text: $name
  subject:
    styles: [block]
  text: $label$field

left_text:
  text-align: left

letter_spaced:
  type: char_spaced

lighter:
  font-weight: lighter

line:
  tag: hr
  text: ""


link:
  tag: a
  attr: { title: $desc }
  text: $name
  style: { cursor: pointer }
  immutable: [url]
  url: /$id
  action: redirect

link_underlined:
  type: link
  style: { text-decoration: underline }

list_item:
  tag: li

list_text:
  type: plain_text
  tag: li
  style: { margin-left: 16 }

lowercase:
  text-transform: lowercase

biggest:
  width: 100%
  height: 100%

medium:
  font-size: 26pt

menu:
  type: container
  class: [menu]
  css: /common/menu.css
  tag: ul

  contents: $items
  items:
    - template: menu_item
    - type: link
    - action: redirect

menu_item: { templates: li }

number_input:
  type: input
  format: number

one_cell_row:
  templates: div
  text: <td>$field</td>

one_column_table:
  type: container
  tag: table
  contents: $items
  items:
    - template: one_cell_row

one_row_table: { type: silos }

p: { tag: p}

page:
  classes: div
  attr: { title: $name }
  sub_page: true
  text: $items
  items: []
  tooltip: false

page_title:
  html: <title>$name</title>

paragraph:
  type: p

password:
  type: input
  attr: { type: password }

password_input:
  type: password

plain:
  tag: div
  value: $name
  text: $value

plain_text:
  tag: div
  text: $id
  attr: { id: ""}

plot:
  tag: div
  fixed_xaxis: yes
  script:
    - /common/jquery.jqplot.min.js
    - /common/jquery.jqplot.canvasTextRenderer.min.js
    - /common/jquery.jqplot.canvasAxisTickRenderer.min.js
    - /common/jquery.jqplot.dateAxisRenderer.min.js
    - /common/jquery.jqplot.highlighter.min.js
    - /common/plot.js
  css: [/common/jquery.jqplot.min.css]
  text: ""
  create: plotter


# todo: fix back-end to contextualise
print:
  desc: Print above contents
  action: redirect
  validate: none
  post:
    - call: datatable::pdf(context,$key)
  query: " "
  target: _blank

processing:
  classes: span
  style: { display: none }


pushed_left:
  position: absolute
  left: 0

pushed_right:
  position: absolute
  right: 0

pushed_up:
  vertical-align: top

question_input:
  type: label_top
  styles: [widest,block]
  label:
    styles: [widest,left_text]
    derive: [question]
    text: $question
  subject:
    styles: [widest]

question_input_page:
  type: input_page
  inputs:
    - template: question_input

radiobox:
  type: input
  attr: { type: radio, value: $id}
  style:
    width: 24px
    height: 24px

right_text:
  text-align: right


radiogroup:
  templates: div
  class: radio
  text: $options
  group: $id
  layout: label_left
  options:
    - template: label_left
    - type:
        type: radiobox
        derive: [group]
        attr: { name: $group }


row_input:
  html: <tr><td>$name</td><td>$field</td></tr>

row_inputs:
  tag: table
  class: [data]
  text: $head $inputs
  heading: $name
  sow: [heading,inputs]
  head:
    html: <thead><th colspan=2>$heading</th></thead>
  inputs:
    - template: row_inputr
    - type: input

section_heading:
  classes: p
  styles: [centered_text,thinner,widest,vspaced,underlined]

side_spacer:
  space: 2px
  subject:
    style:
      display: inline-block
      margin-bottom: $space

silos:
  tag: table
  text: $row
  cell_width: 33%
  sow: [cell_width]
  row:
    templates: tr
    derive: [items]
    sow: [cell_width]
    field: $items
  items:
    - template: table_cell

small:
  font-size: 8pt

span:
  tag: span

source:
  tag: div
  file: $id.html
  jquery: load
  params: [$file]


story:
  type: control
  text: $heading $body
  title: $name
  sow: [title]
  heading:
    type: plain_text
    tag: h1
    class: [heading]
    text: $title
  body:
    - type: plain_text


submit:
  type: button
  selector: "#page *"
  call: $class::$invoker($key)
  action: post

sub_menu:
  templates: div
  text: |
    <a id="$id">$name</a>
    <span>$sub_items</span>
  action: " "
  template: $field
  sub_items:
    - action: redirect
    - type: link

table:
  tag: table
  head: { type: table_head }
  body: { type: table_body }
  text: $head $body
  sow: [rows]
  rows:
    - type: table_row

table_head: { templates: thead }

table_body:
  templates: tbody
  field: $rows

table_cell:
  templates: td
  cell_width: 20%
  style:
    width: $cell_width
    vertical-align: top

table_input:
  templates: tr
  class: [input]
  text: |
    <td style="width:25%;">$name</td>
    <td>
      <a class=input style="width:98%">
        $field
        <span>$desc</span>
      </a>
    </td>

table_input_page:
  type: input_page
  text: |
    $processing
    $synopsis
    $form
  sow: [inputs,actions]
  form:
    type: table
    class: [form]
    text: $inputs $actions
  inputs:
    - template: table_input

table_page:
  type: page
  tag: table
  text: $children
  children: [template: one_cell_row]

table_row:
  tag: tr
  text: $columns
  columns:
    - template: table_cell

tabular:
  type: container
  sow: [col_width]
  contents:
    - default:
        style: { width: $col_width, display: inline-block, vertical-align: top }

tallest:
  height: 100%

template:
  tag: div
  text: $field
  attr: {for: $id, id: ""}

textarea:
  tag: textarea
  value: ""
  text: $value

text_area: { type: textarea}

text_input: {type: input }

thinner:
  font-weight: 100

time:
  type: input
  create: datetimepicker
  datepicker: false
  format: H:i

titled_paragraph:
  classes: div
  text: $heading $content
  title: $id
  body: $name
  heading:
    derive: [title]
    type: plain_text
    tag: h2
    styles: [vspaced]
    text: $title
  content:
    derive: [body]
    type: plain_text
    tag: p
    text: $body
  space: 30
  styles: [vspaced]

top_left:
  position: absolute
  top: 0
  left: 0

top_right:
  position: absolute
  top: 0
  right: 0

tripple_spaced:
  margin-top: 12px

underlined:
  line_width: 1px
  border-bottom: $line_width solid

underlined_text:
  text-decoration: underline

uppercase:
  text-transform: uppercase

vspace:
  mutable: false
  type: blank
  space: 20
  styles: [block,vspaced]

vspaced:
  space: 6px
  margin-top: $space

watermark:
  image: $id.png
  background-image: url($image)
  repeat: no-repeat
  imagex: left
  imagey: center
  background-repeat: $repeat
  background-position: $imagex $imagey
  background-color: $fill

widest:
  width: 100%


wizard:
  classes: div
  create: wizard
  script: [/common/wizard.js]
  css: [/common/wizard.css]
  text: $dummy
  bookmarks: true
  steps: []
  dummy: []


wizard_jump:
  classes: button
  action: trigger
  event:
    name: wizard-jump
    parameters: { index: $id }

wizard_page:
  type: input_page
  text: $processing $synopsis $inputs $actions $navigate
  sub_page: false
  sow: [next,prev]
  navigate:
    - wrap: class
    - prev: {type: wizard_prev}
    - type: wizard_next
    - next

wizard_next:
  type: submit
  name: Next
  desc: Go to next step
  class: [action,wizard-next]

wizard_prev:
  type: button
  name: Previous
  desc: Go to previous step
  action: trigger
  event: wizard-prev

...
