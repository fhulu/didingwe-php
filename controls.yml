---
# html controls
blank:
  html: ""
    
button: 
  desc: ""
  html: <button id="$code" title="$desc" class=action>$name</button>
  
checkbox: 
  html: <input id="$code" title="$desc" type='checkbox'></input>
  
container: 
  html: <div id="$code">$contents</div>
  contents: 
    - template: $field
    
control:
  html: <$tag id="$code" title="$desc" $attrs $attr>$text<$tag>
  
container_without_id:
  html: <div>$contents</div>
  contents: 
    template: $field
    
datatable:
  html: |
    <table id="$code" class=data>
      <tbody></tbody>
    </table>
  create: datatable
  script: /common/datatable3.js
  css: /datatable.css
  position: top
  # table-wide actions
  export:
    name: Export to Excel
    desc: Export to an Excel spreadsheet
    action:
      validate: none
      call: datatable3::start_export()    
  filter:
    name: ""
    desc: Filter by specific columns
  #paging
  goto_first:
    name: First
    desc: Go to first page
  goto_prev:
    name: "<"
    desc: Go to previous page
  goto_next:
    name: ">"
    desc: Go to next page
  goto_last:
    name: Last
    desc: Go to last page
  print:
      desc: "Print above contents"
      action:
        validate: none
        call: datatable3::start_redirect(pdf)
  collapse:
    name: "-"
    desc: Hide details
  expand:
    name: +
    desc: More details ...
  slide: 
    name: "<"
    desc: More options...
  slideoff: 
    name: ">"
    desc: Hide options
  slideSpeed: 100

date:
  type: input
  create: datepicker
  dateFormat: yy-mm-dd
  
datetime:
  type: input
  create: datetimepicker
  format: Y-m-d H:i
  script: common/jquery.datetimepicker.js
  css: common/jquery.datetimepicker.css
  
disabled_text_input:
  type: input
  attr: disabled
  
dropdown:
  html: |
    <select id="$code">
      <option value=''>--Select $name--</option>
      $options
    </select>
  options:
    - type: <option value='$code'>$name</option>

#todo: fix backend inheritance
export:
  name: Export to Excel
  desc: Export to an Excel spreadsheet
  action:
    validate: none
    call: datatable3::start_redirect(export)    

file:
  html: <file id="$code" name="$code"></file>

form:
  html: <form id="$code></form>

google_map:
  html: <div id='$code'></div>
  create: mapper
  script: common/map.js
  zoom: 5
  pin: blue_map_marker

hidden:  
  html: <input id='$code' type=hidden></input>

image:
  html: <img id="$code" src="$src" title="$desc"></img>

input: 
  html: <input id="$code" type="text"></input>

inline_input:
  html: <a class=input>$field<span class="input">$desc</span></a>
  attr: placeholder="$name"

inline_input_page:
  html: |
    <div id='$code'>
      $input_page_header
      <div class="form">
        $inputs
        $actions
      </div>
    </div>
  inputs: 
    - template: inline_input

input_page_header: 
  html: |
    <div id="$code" page="$name">
      <p class="desc">$desc</p>
      <span class=ajax_result style="display: none;"></span>
    </div>
label:
  html: <label id='$code'>$name</label>
  
labelled_input:
  html: |
    <p>$name$label_suffix</p>
    <a class=input>
      $field
      <span>$desc</span>
    </a>  
  label_suffix: ":"

labelled_input_page:
    html: |
      <div id="$code">
        $input_page_header
        <div class="form">
          $inputs
          <p></p>$actions
        </div>
      </div>
    inputs: 
      - template: labelled_input
      - mandatory: "*"

line:
  html: <hr></hr>
  
link:
  html: <a id="$code" title="$desc">$name</a>

list_item:
  html: <li id="$code">$name</li>
  
menu:
  html: <ul id="$code">$items</ul>
  items:
    - type: menu_item

menu_item:
  html: <li><a title="$desc">$name</a></li>
 
one_cell_row:
  html: <tr><td>$field</td></tr>

one_column_table:
  html: <table id='$code' title="$name">$items</table>
  items: 
    - template: one_cell_row

one_row_table:
  html: <table id='$code'><tr>$items</tr></table>
  items:
    - template: table_cell

page_title:
  html: <title>$name</title>

paragraph:
  html: <p id="$code">$name</p>

password:
  html: <input type="password" id="$code" title="$desc"></input>
  valid: password

password_input:
  html: <input type="password" id="$code" title="$desc"></input>
  valid: password

plain:
  html: $name

plain_text:
  type: plain

# todo: fix back-end to contextualise
print:
  desc: "Print above contents"
  action:
    validate: none
    call: datatable3::start_redirect(pdf)

span:
  html: <span id="$code">$name</span>
  
sub_menu:
  html: |
    <li>
      <a href='$url' id="$code">$name</a>
      <span>$sub_items</span>
    </li>
  url: $code.html
  sub_items:
    - type: link
    
table:
  html: <table id="$code"><thead></thead><tbody>$rows</tbody></table>
  rows:
    - template: table_row
    
table_cell:
  html: <td>$field</td>

table_input:
  html: |
    <tr class=input>
      <td>$name</td>
      <td>
        <a class=input>
          $field
          <span>$desc</span>
        </a>
      </td>
    </tr>
    
table_input_page:
  html: | 
    <div id='$code'>
      $input_page_header
      <table class=form>
        $inputs
        <tr>
          <td></td>
          <td>$actions</td>
        </tr>
      </table>
    </div>
  inputs: [template: table_input]

table_page:
  html: <table id='$code' title="$name">$children</table>
  children: [template: one_cell_row]

table_row:
  html: <tr>$columns</tr>
  columns: [template: table_cell]

text: { type: input }

textrea:
  html: <textarea id="$code"></textarea>

text_input: {type: input }

...
